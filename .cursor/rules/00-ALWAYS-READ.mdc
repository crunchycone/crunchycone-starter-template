# ‚ö†Ô∏è CRITICAL RULES - ALWAYS CHECK THESE FIRST ‚ö†Ô∏è

## üö® STOP: BEFORE ANY TASK, CHECK THESE IN ORDER:

### 1Ô∏è‚É£ DEPENDENCIES INSTALLED? (ABSOLUTE FIRST PRIORITY)
- [ ] **Does `node_modules` folder exist?**
  - ‚ùå If NO ‚Üí **RUN IMMEDIATELY**: `npm install`
  - ‚ö†Ô∏è **NOTHING WILL WORK WITHOUT THIS**
  - ‚úÖ If YES ‚Üí Continue to step 2

### 2Ô∏è‚É£ DATABASE SETUP (SECOND PRIORITY)
- [ ] **Does `prisma/db/prod.db` exist?**
  - ‚ùå If NO ‚Üí **RUN IMMEDIATELY**: `npm run db:reset --yes`
  - ‚ö†Ô∏è **APPLICATION WILL BE BROKEN WITHOUT THIS**
  - ‚úÖ If YES ‚Üí Continue

### 3Ô∏è‚É£ ENVIRONMENT CONFIGURED?
- [ ] **Does `.env` file exist?**
  - ‚ùå If NO ‚Üí **RUN**: `cp .env.example .env`
  - ‚úÖ If YES ‚Üí Continue

### 4Ô∏è‚É£ SCHEMA CHANGES
- [ ] **Did you modify `prisma/schema.prisma`?**
  - ‚ùå If YES ‚Üí **RUN IMMEDIATELY**: `npx prisma migrate dev --name "description"`
  - ‚ö†Ô∏è **NEVER** run `prisma generate` alone after schema changes
  - ‚ö†Ô∏è **ALWAYS** use migrate which runs generate automatically

### 5Ô∏è‚É£ TYPE ERRORS
- [ ] **Getting TypeScript errors about Prisma types?**
  - ‚ùå Error: "Cannot find module '.prisma/client'" ‚Üí **RUN**: `npx prisma generate`
  - ‚ùå Error: "Property does not exist on type" ‚Üí **RUN**: `npx prisma generate`

## üî¥ CRITICAL WARNINGS

### ‚ö†Ô∏è DEPENDENCIES MISSING = NOTHING WORKS
**FAILURE TO RUN `npm install` FIRST WILL CAUSE:**
- ‚ùå Cannot run ANY commands
- ‚ùå Cannot start the application
- ‚ùå Cannot run database setup
- ‚ùå Cannot generate Prisma client
- ‚ùå All scripts will fail

### ‚ö†Ô∏è DATABASE MISSING = APPLICATION BROKEN
**FAILURE TO RUN `npm run db:reset --yes` SECOND WILL CAUSE:**
- ‚ùå Application crashes on startup
- ‚ùå All API routes return 500 errors
- ‚ùå Cannot sign in or sign up
- ‚ùå Admin dashboard inaccessible
- ‚ùå TypeScript compilation errors

### ‚ö†Ô∏è SCHEMA CHANGES WITHOUT MIGRATION = DATA CORRUPTION
**FAILURE TO RUN MIGRATIONS AFTER SCHEMA CHANGES WILL CAUSE:**
- ‚ùå Database schema mismatch with Prisma Client
- ‚ùå Runtime crashes when accessing new fields
- ‚ùå Data integrity issues
- ‚ùå TypeScript type mismatches

## üìã PRIORITY ORDER (ALWAYS FOLLOW THIS)

### üî¥ PRIORITY 1: Dependencies (MUST DO FIRST)
```bash
npm install  # Without this, NOTHING else works
```

### üî¥ PRIORITY 2: Database (MUST DO SECOND)
```bash
npm run db:reset --yes  # Without this, app won't start
```

### üü° PRIORITY 3: Environment
```bash
cp .env.example .env  # Needed for JWT and configs
```

### üü¢ PRIORITY 4: Start Development
```bash
npm run dev  # Only after 1, 2, and 3 are done
```

## üîç AUTO-DETECT ERROR PATTERNS

### Common Errors and Immediate Solutions:
```
Error: "command not found: prisma" or "Cannot find module"
‚Üí MISSING: Dependencies not installed
‚Üí RUN: npm install

Error: "P1003: Database file not found"
‚Üí MISSING: Database not created
‚Üí RUN: npm run db:reset --yes

Error: "Cannot find module '.prisma/client'"
‚Üí RUN: npx prisma generate

Error: "Table 'main.User' doesn't exist"
‚Üí RUN: npm run db:reset --yes

Error: "unknown field" or "unknown column"
‚Üí RUN: npx prisma migrate dev --name "fix-schema"

Error: "JWT_SECRET is not defined"
‚Üí MISSING: .env file
‚Üí RUN: cp .env.example .env
```

## ‚úÖ SUCCESS INDICATORS

You know setup is correct when:
- ‚úÖ Folder exists: `node_modules` (FIRST CHECK)
- ‚úÖ File exists: `prisma/db/prod.db` (SECOND CHECK)
- ‚úÖ File exists: `.env`
- ‚úÖ No TypeScript errors in IDE
- ‚úÖ `npm run dev` starts without errors
- ‚úÖ Can navigate to `/auth/setup-admin` or `/auth/signin`

## üéØ QUICK REFERENCE - CORRECT ORDER

**First time setup? RUN IN THIS EXACT ORDER:**
```bash
1. npm install              # FIRST - Install dependencies
2. npm run db:reset --yes   # SECOND - Create database
3. cp .env.example .env     # THIRD - Setup environment
4. npm run dev              # LAST - Start development
```

**Changed schema.prisma?**
```bash
npx prisma migrate dev --name "your-change-description"
```

**Getting type errors?**
```bash
npx prisma generate
```

**Everything broken? NUCLEAR RESET IN ORDER:**
```bash
1. rm -rf node_modules prisma/db/prod.db .env
2. npm install              # FIRST PRIORITY
3. cp .env.example .env
4. npm run db:reset --yes   # SECOND PRIORITY
5. npm run dev
```

---
‚ö†Ô∏è **GOLDEN RULE**: 
1Ô∏è‚É£ FIRST: Dependencies (`npm install`)
2Ô∏è‚É£ SECOND: Database (`npm run db:reset --yes`)
Without these two, NOTHING else matters!